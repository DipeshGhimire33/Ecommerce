{% extends "base.html" %}
{% load static %}

{% block title %}
{% endblock title %}



{% block content %}
<div class="max-w-lg mx-auto mt-10 bg-white shadow-md rounded-2xl p-6 text-center">
  <h1 class="text-2xl font-bold text-gray-800 mb-6">Complete Your Order</h1>

  <p class="mb-4 text-gray-600">Choose your payment method:</p>

  <div class="space-y-4">


  <!-- Cash on Delivery -->
<form id="codForm" method="post" action="{% url 'confirm_order' %}">
  {% csrf_token %}
  <input type="hidden" name="payment_method" value="cod">
  <button type="button"
    onclick="showCODMessage()"
    class="w-full bg-green-500 text-white py-3 rounded-xl hover:bg-green-600 transition">
    Cash on Delivery
  </button>
</form>

<!-- Success Message -->
<div id="codMessage" class="hidden mt-4 text-green-600 font-semibold">
  Your order will reach you soon! Thank you for using our service.
</div>

<script>
  function showCODMessage() {
    const msg = document.getElementById("codMessage");
    msg.classList.remove("hidden");

    setTimeout(() => {
      document.getElementById("codForm").submit();  // submit form after 5s
    }, 3000);
  }
</script>


    <!-- Online Payment -->
    <button onclick="document.getElementById('qrModal').classList.remove('hidden')"
      class="w-full bg-blue-600 text-white py-3 rounded-xl hover:bg-blue-700 transition">
      Pay Online
    </button>
  </div>
</div>

<!-- QR Modal -->
<div id="qrModal" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white p-6 rounded-2xl shadow-lg w-80 text-center">
    <h2 class="text-lg font-bold mb-4">Scan to Pay</h2>
    <img src="{% static 'QR/QR.png' %}" class="mx-auto mb-4 w-40 h-40">
    <form method="post" action="{% url 'confirm_order' %}">
      {% csrf_token %}
      <input type="hidden" name="payment_method" value="online">
      <button type="submit"
        class="w-full bg-blue-600 text-white py-2 rounded-xl hover:bg-blue-700">
        Confirm Payment
      </button>
    </form>
    <button onclick="document.getElementById('qrModal').classList.add('hidden')"
      class="mt-3 text-gray-500 hover:underline">Cancel</button>
  </div>
</div>
{% endblock content %}

